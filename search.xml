<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>ElasticSearch Install</title>
      <link href="/2018/10/22/ElasticSearch-Install/"/>
      <url>/2018/10/22/ElasticSearch-Install/</url>
      
        <content type="html"><![CDATA[<h4 id="require-JDK"><a href="#require-JDK" class="headerlink" title="require JDK"></a>require JDK</h4><p>install jdk1.8</p><h4 id="Install-ElasticSearch-package"><a href="#Install-ElasticSearch-package" class="headerlink" title="Install ElasticSearch package"></a>Install ElasticSearch package</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.4.2.tar.gz</span><br></pre></td></tr></table></figure><h4 id="unzip-package"><a href="#unzip-package" class="headerlink" title="unzip package"></a>unzip package</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxf elasticsearch-6.4.2.tar.gz</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="run-elasticsearch"><a href="#run-elasticsearch" class="headerlink" title="run elasticsearch"></a>run elasticsearch</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span>  elasticsearch-6.4.2/bin</span><br><span class="line"></span><br><span class="line">./elasticsearch</span><br></pre></td></tr></table></figure><h4 id="details"><a href="#details" class="headerlink" title="details"></a>details</h4><p>6.4.2版本的elasticsearch打开时，默认的的http的ip时127.0.0.1，默认http端口时9201，可以在elasticsearch-6.4.2/bin/elasticsearch.yml中配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"># ======================== Elasticsearch Configuration =========================</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># NOTE: Elasticsearch comes with reasonable defaults for most settings.</span><br><span class="line"></span><br><span class="line"># Before you set out to tweak and tune the configuration, make sure you</span><br><span class="line"></span><br><span class="line"># understand what are you trying to accomplish and the consequences.</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># The primary way of configuring a node is via this file. This template lists</span><br><span class="line"></span><br><span class="line"># the most important settings you may want to configure for a production cluster.</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># Please consult the documentation for further information on configuration options:</span><br><span class="line"></span><br><span class="line"># https://www.elastic.co/guide/en/elasticsearch/reference/index.html</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># ---------------------------------- Cluster -----------------------------------</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># Use a descriptive name for your cluster:</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#cluster.name: my-application</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># ------------------------------------ Node ------------------------------------</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># Use a descriptive name for the node:</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#node.name: node-1</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># Add custom attributes to the node:</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#node.attr.rack: r1</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># ----------------------------------- Paths ------------------------------------</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># Path to directory where to store the data (separate multiple locations by comma):</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#path.data: /path/to/data</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># Path to log files:</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#path.logs: /path/to/logs</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># ----------------------------------- Memory -----------------------------------</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># Lock the memory on startup:</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">#bootstrap.memory_lock: true</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># Make sure that the heap size is set to about half the memory available</span><br><span class="line"></span><br><span class="line"># on the system and that the owner of the process is allowed to use this</span><br><span class="line"></span><br><span class="line"># limit.</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># Elasticsearch performs poorly when the system is swapping the memory.</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># ---------------------------------- Network -----------------------------------</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># Set the bind address to a specific IP (IPv4 or IPv6):</span><br><span class="line">#network.host: 192.168.0.1</span><br><span class="line">#</span><br><span class="line"># Set a custom port for HTTP:</span><br><span class="line">#</span><br><span class="line">#http.port: 9200</span><br><span class="line">#</span><br><span class="line"># For more information, consult the network module documentation.</span><br><span class="line">#</span><br><span class="line"># --------------------------------- Discovery ----------------------------------</span><br><span class="line">#</span><br><span class="line"># Pass an initial list of hosts to perform discovery when new node is started:</span><br><span class="line"># The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]</span><br><span class="line">#</span><br><span class="line">#discovery.zen.ping.unicast.hosts: [&quot;host1&quot;, &quot;host2&quot;]</span><br><span class="line">#</span><br><span class="line"># Prevent the &quot;split brain&quot; by configuring the majority of nodes (total number of master-eligible nodes / 2 + 1):</span><br><span class="line">#</span><br><span class="line">#discovery.zen.minimum_master_nodes: </span><br><span class="line">#</span><br><span class="line"># For more information, consult the zen discovery module documentation.</span><br><span class="line">#</span><br><span class="line"># ---------------------------------- Gateway -----------------------------------</span><br><span class="line">#</span><br><span class="line"># Block initial recovery after a full cluster restart until N nodes are started:</span><br><span class="line">#</span><br><span class="line">#gateway.recover_after_nodes: 3</span><br><span class="line">#</span><br><span class="line"># For more information, consult the gateway module documentation.</span><br><span class="line">#</span><br><span class="line"># ---------------------------------- Various -----------------------------------</span><br><span class="line">#</span><br><span class="line"># Require explicit names when deleting indices:</span><br><span class="line">#</span><br><span class="line">#action.destructive_requires_name: true</span><br></pre></td></tr></table></figure><p>当修改network.host配置时启动可能报错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536]；</span><br><span class="line">initial heap size [268435456] not equal to maximum heap size [2147483648]; this can cause resize pauses and prevents mlockall from locking the entire heap</span><br><span class="line">max virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144]</span><br></pre></td></tr></table></figure><p>解决方法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br><span class="line"><span class="built_in">ulimit</span> -n 65536</span><br><span class="line">sysctl -w vm.max_map_count=262144</span><br></pre></td></tr></table></figure><p>参考网址</p><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/system-config.html" target="_blank" rel="noopener">https://www.elastic.co/guide/en/elasticsearch/reference/current/system-config.html</a></p>]]></content>
      
      
      <categories>
          
          <category> soft install </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Docker install redis</title>
      <link href="/2018/10/18/Docker-install-redis/"/>
      <url>/2018/10/18/Docker-install-redis/</url>
      
        <content type="html"><![CDATA[<h4 id="pull-image"><a href="#pull-image" class="headerlink" title="pull image"></a>pull image</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull  redis</span><br></pre></td></tr></table></figure><h4 id="install-image"><a href="#install-image" class="headerlink" title="install image"></a>install image</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 6379:6379 -v <span class="variable">$PWD</span>/data:/data  -d redis:latest  --appendonly yes --requirepass <span class="string">"mypassword"</span></span><br></pre></td></tr></table></figure><ol><li><p><strong>-p 6379:6379 :</strong> 将容器的6379端口映射到主机的6379端口</p></li><li><p><strong>-v $PWD/data:/data :</strong> 将主机中当前目录下的data挂载到容器的/data）</p></li><li><p><strong>–appendonly yes :</strong> 打开redis持久化配置</p></li><li><p><strong>–requirepass :</strong> redis设置密码</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> docker soft intall </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>centos/fedro python3.7 install</title>
      <link href="/2018/10/15/Centos-Fedro-Python3-7-Install/"/>
      <url>/2018/10/15/Centos-Fedro-Python3-7-Install/</url>
      
        <content type="html"><![CDATA[<h4 id="config-compile-enviroment"><a href="#config-compile-enviroment" class="headerlink" title="config compile enviroment"></a>config compile enviroment</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc</span><br></pre></td></tr></table></figure><h4 id="download-latest-source-code"><a href="#download-latest-source-code" class="headerlink" title="download latest source code"></a>download latest source code</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.python.org/ftp/python/3.7.0/Python-3.7.0.tgz</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="extract-the-downloaded-package"><a href="#extract-the-downloaded-package" class="headerlink" title="extract the downloaded package"></a>extract the downloaded package</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xzf Python-3.7.0.tgz</span><br></pre></td></tr></table></figure><h4 id="compile-python-source-code"><a href="#compile-python-source-code" class="headerlink" title="compile python source code"></a>compile python source code</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> Python-3.7.0</span><br><span class="line">./configure --<span class="built_in">enable</span>-optimizations</span><br><span class="line">make altinstall</span><br></pre></td></tr></table></figure><h4 id="check"><a href="#check" class="headerlink" title="check"></a>check</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Python3.7 --version</span><br></pre></td></tr></table></figure><h4 id="others"><a href="#others" class="headerlink" title="others"></a>others</h4><p><em>when compile the source code , may be  require zlib and ctype</em> </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc gcc-c++ </span><br><span class="line">yum -y install zlib zlib-devel</span><br><span class="line">yum -y install libffi-devel</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> soft install </category>
          
      </categories>
      
      
    </entry>
    
  
  
</search>
